<mat-tab-group>
  <mat-tab label="Incident Details">
    <!-- <div *ngFor="let key of data | keyvalue" class="incidentDetails">
        <p style="color: white;">{{key.key}} -> {{key.value}}</p> -->
    <div class="container" *ngFor="let keyValuePair of data | keyvalue">
      <ng-container *ngIf="mapToSearchIncident(keyValuePair.key)">
        <div class="item-1">{{ keyValuePair.key }}</div>
        <div class="item-2">{{ keyValuePair.value }}</div>
      </ng-container>
    </div>
    <!-- </div> -->
  </mat-tab>
  <mat-tab label="Middleware Details">

    <!-- No logs -->
    <div class="under-development-container" *ngIf="!hasMiddlewareLogs()">
      <h1>No Middleware Logs Found</h1>
      <p>Self-healing middleware execution has not been generated.</p>
    </div>

    <!-- Logs Table -->
    <div *ngIf="hasMiddlewareLogs()" class="middleware-container">

      <div class="middleware-meta">
        <span><b>Incident:</b> {{ data?.['Middleware Logs']?.incident_number }}</span>
        <span><b>Action:</b> {{ data?.['Middleware Logs']?.action_type }}</span>
        <span><b>Generated By:</b> {{ data?.['Middleware Logs']?.generated_by }}</span>
      </div>

      <table mat-table [dataSource]="middlewareDataSource" class="middleware-table">

        <!-- Step -->
        <ng-container matColumnDef="step_no">
          <th mat-header-cell *matHeaderCellDef>#</th>
          <td mat-cell *matCellDef="let row">{{ row.step_no }}</td>
        </ng-container>

        <!-- Title -->
        <ng-container matColumnDef="title">
          <th mat-header-cell *matHeaderCellDef>Step</th>
          <td mat-cell *matCellDef="let row">{{ row.title }}</td>
        </ng-container>

        <!-- Description -->
        <ng-container matColumnDef="description">
          <th mat-header-cell *matHeaderCellDef>Description</th>
          <td mat-cell *matCellDef="let row">{{ row.description }}</td>
        </ng-container>

        <!-- System -->
        <ng-container matColumnDef="system">
          <th mat-header-cell *matHeaderCellDef>System</th>
          <td mat-cell *matCellDef="let row">
            <span class="system-chip">{{ row.system }}</span>
          </td>
        </ng-container>

        <!-- Execution -->
        <ng-container matColumnDef="execution_type">
          <th mat-header-cell *matHeaderCellDef>Execution</th>
          <td mat-cell *matCellDef="let row">{{ row.execution_type }}</td>
        </ng-container>

        <!-- Status -->
        <ng-container matColumnDef="status">
          <th mat-header-cell *matHeaderCellDef>Status</th>
          <td mat-cell *matCellDef="let row">
            <span class="status success" *ngIf="row.status === 'SUCCESS'">SUCCESS</span>
            <span class="status failed" *ngIf="row.status !== 'SUCCESS'">FAILED</span>
          </td>
        </ng-container>

        <!-- Timestamp -->
        <ng-container matColumnDef="timestamp">
          <th mat-header-cell *matHeaderCellDef>Time</th>
          <td mat-cell *matCellDef="let row">
            {{ row.timestamp | date:'medium' }}
          </td>
        </ng-container>

        <tr mat-header-row *matHeaderRowDef="displayedMiddlewareColumns"></tr>
        <tr mat-row *matRowDef="let row; columns: displayedMiddlewareColumns;"></tr>
      </table>

    </div>
  </mat-tab>

  <mat-tab label="Activity Details">
    <div class="under-development-container" *ngIf='data.Self_Healing_Action == "Not_Taken"'>
      <h1>No Activity Found.</h1>
      <p>Please perform Activity and check back.</p>
    </div>
    <ng-container *ngIf='data.Self_Healing_Action == "Completed"'>
      <div class="container" *ngFor="let keyValuePair of data | keyvalue">
        <ng-container *ngIf="mapToSearchActivity(keyValuePair.key)">
          <div class="item-1">
            <ng-container *ngIf='keyValuePair.key == "restext" && data.resCode == 200'>
              Message
            </ng-container>
            <ng-container *ngIf='keyValuePair.key == "restext" && data.resCode !== 200'>
              Reason
            </ng-container>
            <ng-container *ngIf='keyValuePair.key == "status"'>
              Status
            </ng-container>
            <ng-container *ngIf='keyValuePair.key == "Self_Healing_Action"'>
              Self Healing Action
            </ng-container>
            <ng-container *ngIf='keyValuePair.key == "resCode"'>
              Activity Code
            </ng-container>
            <ng-container
              *ngIf='keyValuePair.key !== "status" && keyValuePair.key !== "restext" && keyValuePair.key !== "resCode" '>
              {{ keyValuePair.key }}
            </ng-container>

          </div>
          <div class="item-2">{{ keyValuePair.value }}</div>
        </ng-container>
      </div>
    </ng-container>
  </mat-tab>
</mat-tab-group>